<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Landingpage</title>

    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        var temperature = '{{temperature}}';
        var humidity = '{{humidity}}';

        google.charts.load("current", {packages:['corechart']});
        google.charts.setOnLoadCallback(drawChart_temp);
        <!--Luftfeuchte-->
        google.charts.load('current', {'packages':['gauge']});
        google.charts.setOnLoadCallback(drawChart_luft);
        <!--Lautstärke-->
        google.charts.load('current', {'packages':['line']});
        google.charts.setOnLoadCallback(drawChart_laut);



        // Callback that creates and populates a data table,
        // instantiates the pie chart, passes in the data and
        // draws it.


        // Create the data table.
        function drawChart_temp() {
            var data = google.visualization.arrayToDataTable([
                ["Zeit", "Celsius", { role: "style" } ],
                ["15.00 h", 18.94, "blue"],
                ["16.00 h", 19.49, "lightblue"],
                ["17.00 h", 19.30, "blue"],
                ["18.00 h", temperature, "lightblue"]
            ]);

            var view = new google.visualization.DataView(data);
            view.setColumns([0, 1,
                { calc: "stringify",
                    sourceColumn: 1,
                    type: "string",
                    role: "annotation" },
                2]);

            var notiz_temp = "I don't have a temperature";
            for (var i = 0; i < data.getNumberOfRows(); i++) {
                switch (data.getValue(i, 1)) {
                    case (data.getValue(i, 1)<18):
                        notiz_temp = "Brr… It’s cold as Ice! Dreh mal die Heizung auf!";
                        break;

                    case (18<data.getValue(i, 1)<=19):
                        notiz_temp = "Baby it’s getting cold inside! Fenster zu und Heizung an!";
                        break;

                    case (20<=data.getValue(i, 1)<=24):
                        notiz_temp = "I got the right temperature – so lässt es sich aushalten!";
                        break;

                    case (25<=data.getValue(i, 1)<26):
                        notiz_temp = "It’s getting hot in here – also mach mal die Fenster auf Kippstellung";
                        break;

                    case (26<=data.getValue(i, 1)):
                        notiz_temp = "The heat is on! Mindestens 3 Minuten stoßlüften und Jalousien runter!";
                        break;
                }
                document.getElementById('temp_textarea').innerHTML = notiz_temp;
            }

            var options = {
                width: 600,
                height: 400,
                bar: {groupWidth: "95%"},
                legend: { position: "none" },
            };
            var chart = new google.visualization.ColumnChart(document.getElementById("chart_temp"));
            chart.draw(view, options);
        }


        function drawChart_luft() {

            var data = google.visualization.arrayToDataTable([
                ['Label', 'Value'],
                ['%', parseFloat(humidity)]

            ]);

            var notiz_luft = "I don't have a humidity factor";
            for (var i = 0; i < data.getNumberOfRows(); i++) {
                switch (data.getValue(i, 1)) {
                    case (data.getValue(i, 1)>80):
                        notiz_luft = "Tropisches Klima – Pflanzen umsiedeln und Schälchen mit Salz aufstellen.";
                        break;

                    case (70<=data.getValue(i, 1)<=80):
                        notiz_luft = "Fast zu feucht";
                        break;

                    case (62<=data.getValue(i, 1)<70):
                        notiz_luft = "Angenehme Luftfeutigkeit – so kann es bleiben!";
                        break;

                    case (55<=data.getValue(i, 1)<62):
                        notiz_luft = "Fast zu trocken";
                        break;

                    case (55>data.getValue(i, 1)):
                        notiz_luft = "Wüstenluft - Schälchen mit Wasser aufstellen (am besten auf der Heizung)";
                        break;
                }
                document.getElementById('luft_textarea').innerHTML = notiz_luft; //this is to make the notiz_temp value available to html.
            }

            var options = {
                width: 400,
                height: 400,
                greenFrom:40, greenTo:60,
                redFrom: 80, redTo: 100,
                yellowFrom:60, yellowTo: 80,
                minorTicks: 6
            };

            var chart = new google.visualization.Gauge(document.getElementById('chart_luft'));

            chart.draw(data, options);

            setInterval(function() {
                data.setValue(humidity);
                chart.draw(data, options);
            }, 13000);

        }

        function drawChart_laut() {

            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Zeit');
            data.addColumn('number', 'Laustärke in db');

            data.addRows([
                ["15.00 h",  77.00],
                ["16.00 h",  80.00],
                ["17.00 h",  68.00],
                ["18.00 h",  57.00],
                ["19.00 h",  40.00]
            ]);

            var notiz_laut = "I don't have a loudness factor";
            for (var i = 0; i < data.getNumberOfRows(); i++) {
                switch (data.getValue(i, 1)) {
                    case (data.getValue(i, 1)>=50):
                        notiz_laut = "Psst – es ist zu laut! Fenster schließen, kurze Pause und ruhig weiterreden.";
                        break;

                    case (40<=data.getValue(i, 1)<50):
                        notiz_laut = "Ganz schön laut hier – alle einen Gang zurückschalten und leiser weiter arbeiten.";
                        break;

                    case (data.getValue(i, 1)<40):
                        notiz_laut = "Angenehme Hintergrundgeräusche – so kann es weitergehen.";
                        break;
                }
                document.getElementById('laut_textarea').innerHTML = notiz_laut; //this is to make the notiz_temp value available to html.
            }

            var options = {
                width: 600,
                height: 400,
            };

            var chart = new google.charts.Line(document.getElementById('chart_laut'));

            chart.draw(data, google.charts.Line.convertOptions(options));
        }

    </script>
    <style>

        h2{
            font-family: Arial;
        }

        table{
            background-color: #CEF6E3;
            padding: 40px;
            height:100%;
            width: 100%;
        }

        /*        td{
                    width: 20%;

                }*/

        #kachel{
            position: center;
            background-color: white;
            border: 3px solid #000;
            height: 20%;
            width: 40%;
        }

        #titel{
            text-align: center;
            color:black;
            width:40%;
        }



    </style>
</head>
<body>
<table>
    <tr>
        <td id="kachel">
            <div id="chart_temp"></div>
        </td>

        <td>
        <td>

            <textarea id="temp_textarea">Text to be changed</textarea>

        </td>

        <td>

            <textarea id="luft_textarea">Text to be changed</textarea>

        </td>
        </td>


        <td id="kachel">
            <div id="chart_luft"></div>
        </td>
    </tr>

    <tr>
        <td id="titel">
            <h2>Temperatur</h2>
        </td>


        <td>
        <td></td>
        <td></td>
        </td>

        <td id="titel">
            <h2>Luftfeuchtigkeit</h2>
        </td>
    </tr>

    <tr>
    </tr>

    <tr>
    </tr>

    <tr>
        <td id="kachel">
            <div id="chart_co"></div>
        </td>


        <td>
        <td>

            <textarea id="co_textarea">Text to be changed</textarea>

        </td>

        <td>

            <textarea id="laut_textarea">Text to be changed</textarea>

        </td>
        </td>

        <td id="kachel">
            <div id="chart_laut"></div>
        </td>
    </tr>

    <tr>
        <td id="titel">
            <h2>CO2</h2>
        </td>

        <td>
        <td></td>
        <td></td>
        </td>

        <td id="titel">
            <h2>Lautstärke</h2>
        </td>
    </tr>

</table>

</body>

</html>